{% extends 'base.html' %}

{% block content %}

<div class="jumbotron bg-primary text-white p-5 rounded mb-4">
    <div class="container-fluid">
        <h1 class="display-4">{{ conference.name |safe }}</h1>
        <p class="intro-paragraph">{{ conference.organizer.name }}</p>
        
        {% if not current_user.is_authenticated %}
            <a href="{{ url_for('auth.register') }}" class="btn btn-light btn-lg me-3">Créer un compte</a>
            <a href="{{ url_for('auth.login') }}" class="btn btn-outline-light btn-lg">Se connecter</a>
        {% else %}
            <a href="{{ url_for('main.choose_type') }}" class="btn btn-light btn-lg me-3">Nouvelle soumission</a>
            <a href="{{ url_for('main.mes_communications') }}" class="btn btn-outline-light btn-lg">Mes communications</a>
        {% endif %}
    </div>
</div>

<div class="container-xxl">
  <div class="row">
    <div class="col-12">
  <!-- Information générale -->
            <div class="content-section">
                <p class="lead">Le {{ conference.name |safe }} est organisé par le <strong>{{ conference.organizing_lab.name }} ({{ conference.organizing_lab.short_name }})</strong>, {{ conference.organizing_lab.description }}.</p>
                
                <div class="highlight-box text-center">
                    <h3 class="h4 mb-3"><i class="fas fa-map-marker-alt"></i> {{ conference_location.city }}</h3>
                    <h2 class="h3 mb-3"><i class="fas fa-calendar-alt"></i> {{ conference_dates.dates }}</h2>
                    <h4 class="h5">« {{ conference.theme }} »</h4>
                </div>
                
                <div class="download-link">
                    <p class="mb-2"><i class="fas fa-file-pdf"></i> <strong>Documentation officielle</strong></p>
                    <a href="./static/content/flyer.pdf" target="_blank" class="btn btn-outline-primary">
                        <i class="fas fa-download"></i> Télécharger le flyer de présentation
                    </a>
                </div>
            </div>

            <!-- Présentation -->
            <div class="content-section">
                <div class="section-header">
                    <h2 class="h4 mb-0"><i class="fas fa-bullseye"></i> PRÉSENTATION DU CONGRÈS</h2>
                </div>
                
                <div class="congress-info">
                    <h5 class="text-success"><i class="fas fa-leaf"></i> Objectif principal</h5>
                    <p class="mb-3">{{ conference.objectif | safe }}</p>
                </div>
                
                
                <h5 class="mt-4"><i class="fas fa-clipboard-list"></i> Format des présentations</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-primary mb-3">
                            <div class="card-body">
                                <h6 class="card-title text-primary"><i class="fas fa-thumbtack"></i> Sessions poster</h6>
                                <p class="card-text small">Tous les travaux seront présentés sous forme de poster lors de sessions dédiées</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-success mb-3">
                            <div class="card-body">
                                <h6 class="card-title text-success"><i class="fas fa-edit"></i> Communications écrites</h6>
                                <p class="card-text small">Possibilité de communication écrite avec attribution d'un DOI</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info mt-3">
                    <h6 class="alert-heading"><i class="fas fa-wrench"></i> Programme complémentaire</h6>
                    <p class="mb-0">Des <strong>ateliers thématiques</strong> seront programmés en alternance avec des <strong>conférences plénières</strong>.</p>
                </div>
            </div>


<div class="container-fluid p-0">
    <div class="row no-gutters">
        <div class="col-12">
            <img src="{{ url_for('static', filename='content/ville.png') }}" class="img-fluid w-100" alt="Ville de {{ conference_location.city }}">
        </div>
        <div class="col-12 bg-light p-5">
            <div class="container">
                <h2 class="text-center mb-4">{{ conference_location.venue }} et Ville de {{ conference_location.city }}</h2>
                <p class="lead text-center">
		  {{ conference_location.place_description | safe }}
                </p>
                <p class="lead text-center">
		  {{ conference_location.city_description | safe }}
                </p>
            </div>
        </div>
    </div>
</div>



	    
            <!-- Informations pratiques -->
            <div class="content-section">
                <div class="section-header">
                    <h2 class="h4 mb-0"><i class="fas fa-info-circle"></i> INFORMATIONS PRATIQUES</h2>
                </div>
                
                <div class="row">
                    <div class="col-md-4 text-center">
                        <div class="p-3">
                            <h5 class="text-primary"><i class="fas fa-university"></i> Lieu</h5>
                            <p class="mb-0">{{ conference_location.venue }}<br><small class="text-muted">{{ conference_location.address }}</small></p>
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        <div class="p-3">
                            <h5 class="text-primary"><i class="fas fa-calendar-alt"></i> Dates</h5>
                            <p class="mb-0">{{ conference_dates.dates }}</p>
                        </div>
                    </div>
                    <div class="col-md-4 text-center">
                        <div class="p-3">
                            <h5 class="text-primary"><i class="fas fa-bullseye"></i> Thème</h5>
                            <p class="mb-0">{{ conference.theme | safe }}</p>
                        </div>
                    </div>
                </div>
            </div>


            <div class="content-section">
                <div class="section-header">
                    <h2 class="h4 mb-0"><i class="fas fa-building"></i> ORGANISATION</h2>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Organisateur principal</h6>
                        <p><strong>{{ conference.organizing_lab.short_name }}</strong><br>
                        <small>{{ conference.organizing_lab.name }}</small></p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-primary">Institutions partenaires</h6>
                        <p><strong>Université de Lorraine</strong><br>
                        <strong>CNRS</strong><br>
                        </p>
                    </div>
                </div>
            </div>


	    

    <!-- Partenaires et sponsors -->
    {% if committees.sponsors %}
    <div class="content-section">
        <div class="section-header">
            <h2 class="h4 mb-0"><i class="fas fa-handshake me-2"></i>Partenaires et sponsors</h2>
        </div>
        
        <!-- Sponsors Platinum -->
        {% set platinum_sponsors = committees.sponsors | selectattr('level', 'equalto', 'platinum') | list %}
        {% if platinum_sponsors %}
        <h5 class="text-warning mb-3"><i class="fas fa-star me-2"></i>Partenaires Platinum</h5>
        <div class="row mb-4">
            {% for sponsor in platinum_sponsors %}
            <div class="col-md-4 mb-3">
                <div class="card h-100 border-warning">
                    <div class="card-body text-center">
                        <h6 class="card-title">{{ sponsor.name }}</h6>
                        <p class="card-text small text-muted">Partenaire principal</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Sponsors Gold -->
        {% set gold_sponsors = committees.sponsors | selectattr('level', 'equalto', 'gold') | list %}
        {% if gold_sponsors %}
        <h5 class="text-warning mb-3"><i class="fas fa-medal me-2"></i>Partenaires Gold</h5>
        <div class="row mb-4">
            {% for sponsor in gold_sponsors %}
            <div class="col-md-3 mb-3">
                <div class="card h-100 border-warning">
                    <div class="card-body text-center">
                        <h6 class="card-title">{{ sponsor.name }}</h6>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Sponsors Silver -->
        {% set silver_sponsors = committees.sponsors | selectattr('level', 'equalto', 'silver') | list %}
        {% if silver_sponsors %}
        <h5 class="text-muted mb-3"><i class="fas fa-award me-2"></i>Partenaires Silver</h5>
        <div class="row">
            {% for sponsor in silver_sponsors %}
            <div class="col-md-3 mb-3">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <h6 class="card-title">{{ sponsor.name }}</h6>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    {% endif %}


            <!-- Organisation -->
        </div>
    </div>
</div>
{% endblock %}
