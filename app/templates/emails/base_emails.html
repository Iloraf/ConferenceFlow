<!-- templates/emails/base_email.html - Template de base pour tous les emails -->

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Congr√®s SFT{% endblock %}</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .email-container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 2px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #007bff;
            margin: 0;
            font-size: 24px;
        }
        
        .header p {
            color: #6c757d;
            margin: 5px 0 0 0;
            font-size: 14px;
        }
        
        .content {
            margin-bottom: 30px;
        }
        
        .communication-box {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        
        .communication-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .thematiques {
            margin: 10px 0;
        }
        
        .thematique-badge {
            display: inline-block;
            background: #007bff;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin: 2px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            margin: 10px 5px;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #333;
        }
        
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        
        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .footer {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            color: #6c757d;
            font-size: 12px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-box {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6c757d;
            text-transform: uppercase;
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .email-container {
                padding: 20px;
            }
            
            .btn {
                display: block;
                width: 100%;
                text-align: center;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <div class="header">
            <h1>{% block header_title %}Congr√®s SFT{% endblock %}</h1>
            <p>{% block header_subtitle %}Soci√©t√© Fran√ßaise de Thermique{% endblock %}</p>
        </div>
        
        <div class="content">
            {% block content %}{% endblock %}
        </div>
        
        <div class="footer">
            <p>
                <strong>Congr√®s SFT</strong><br>
                Cet email a √©t√© envoy√© automatiquement par le syst√®me de gestion du congr√®s.<br>
                Pour toute question, contactez l'organisation √† 
                <a href="mailto:contact@sft.asso.fr" style="color: #007bff;">contact@sft.asso.fr</a>
            </p>
        </div>
    </div>
</body>
</html>

<!-- templates/emails/reviewer_assignment.html - Notification d'affectation -->

{% extends 'emails/base_email.html' %}

{% block title %}Nouvelle affectation de review{% endblock %}

{% block header_title %}Nouvelle affectation de review{% endblock %}
{% block header_subtitle %}Vous avez √©t√© assign√©(e) comme reviewer{% endblock %}

{% block content %}
<p>Bonjour <strong>{{ reviewer.first_name or reviewer.email.split('@')[0] }}</strong>,</p>

<p>Vous venez d'√™tre assign√©(e) comme reviewer pour la communication suivante :</p>

<div class="communication-box">
    <div class="communication-title">{{ communication.title }}</div>
    
    {% if communication.authors %}
    <p><strong>Auteur(s) :</strong> 
        {% for author in communication.authors %}
            {{ author.email }}{% if author.affiliation %} ({{ author.affiliation.sigle }}){% endif %}{% if not loop.last %}, {% endif %}
        {% endfor %}
    </p>
    {% endif %}
    
    {% if thematiques %}
    <div class="thematiques">
        <strong>Th√©matiques :</strong><br>
        {% for thematique in thematiques %}
        <span class="thematique-badge" style="background-color: {{ thematique.couleur }};">
            {{ thematique.code }} - {{ thematique.nom }}
        </span>
        {% endfor %}
    </div>
    {% endif %}
</div>

{% if due_date %}
<div class="alert alert-info">
    <strong>üìÖ √âch√©ance :</strong> {{ due_date.strftime('%d/%m/%Y') }}<br>
    <small>Merci de rendre votre √©valuation avant cette date.</small>
</div>
{% endif %}

<p><strong>Prochaines √©tapes :</strong></p>
<ol>
    <li>Consultez la communication compl√®te sur votre tableau de bord</li>
    <li>V√©rifiez qu'il n'y a pas de conflit d'int√©r√™t</li>
    <li>R√©alisez votre √©valuation dans les d√©lais impartis</li>
    <li>Soumettez votre rapport via l'interface d√©di√©e</li>
</ol>

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ review_url }}" class="btn">
        üìñ Consulter la communication
    </a>
    <a href="{{ dashboard_url }}" class="btn btn-secondary">
        üìä Mon tableau de bord
    </a>
</div>

<p>Merci pour votre engagement et votre expertise au service de la communaut√© scientifique !</p>

<p>Cordialement,<br>
<strong>L'√©quipe d'organisation du congr√®s SFT</strong></p>
{% endblock %}

<!-- templates/emails/reviewer_reminder.html - Rappel -->

{% extends 'emails/base_email.html' %}

{% block title %}Rappel - Reviews en attente{% endblock %}

{% block header_title %}Rappel Reviews{% endblock %}
{% block header_subtitle %}{{ assignments|length }} review(s) en attente{% endblock %}

{% block content %}
<p>Bonjour <strong>{{ reviewer.first_name or reviewer.email.split('@')[0] }}</strong>,</p>

<p>Ce message vous rappelle que vous avez 
<strong>{{ assignments|length }} review(s) en attente</strong> :</p>

{% for assignment in assignments %}
<div class="communication-box">
    <div class="communication-title">{{ assignment.communication.title }}</div>
    
    {% if assignment.due_date %}
        {% if assignment.is_overdue %}
        <div class="alert alert-danger">
            <strong>‚ö†Ô∏è EN RETARD</strong> - √âch√©ance d√©pass√©e le {{ assignment.due_date.strftime('%d/%m/%Y') }}
        </div>
        {% else %}
        <div class="alert alert-warning">
            <strong>‚è∞ √Ä rendre pour le {{ assignment.due_date.strftime('%d/%m/%Y') }}</strong>
        </div>
        {% endif %}
    {% endif %}
    
    {% if assignment.communication.thematiques %}
    <div class="thematiques">
        {% for thematique in assignment.communication.thematiques %}
        <span class="thematique-badge" style="background-color: {{ thematique.couleur }};">
            {{ thematique.code }}
        </span>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endfor %}

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ dashboard_url }}" class="btn btn-success">
        üìù Acc√©der √† mes reviews
    </a>
</div>

<p>Merci de traiter ces √©valuations dans les meilleurs d√©lais.</p>

<p>Cordialement,<br>
<strong>L'√©quipe d'organisation du congr√®s SFT</strong></p>
{% endblock %}

<!-- templates/emails/admin_weekly_summary.html - R√©sum√© hebdomadaire admin -->

{% extends 'emails/base_email.html' %}

{% block title %}R√©sum√© hebdomadaire - Reviews{% endblock %}

{% block header_title %}R√©sum√© hebdomadaire{% endblock %}
{% block header_subtitle %}Gestion des reviews - {{ period }}{% endblock %}

{% block content %}
<p>Bonjour,</p>

<p>Voici le r√©sum√© de l'activit√© de review pour la p√©riode du <strong>{{ period }}</strong> :</p>

<div class="stats-grid">
    <div class="stat-box">
        <div class="stat-number">{{ stats.new_assignments }}</div>
        <div class="stat-label">Nouvelles affectations</div>
    </div>
    <div class="stat-box">
        <div class="stat-number">{{ stats.completed_reviews }}</div>
        <div class="stat-label">Reviews termin√©es</div>
    </div>
    <div class="stat-box">
        <div class="stat-number" style="color: #dc3545;">{{ stats.overdue_reviews }}</div>
        <div class="stat-label">Reviews en retard</div>
    </div>
    <div class="stat-box">
        <div class="stat-number" style="color: #ffc107;">{{ stats.pending_communications }}</div>
        <div class="stat-label">Communications sans 2 reviewers</div>
    </div>
</div>

{% if stats.overdue_reviews > 0 %}
<div class="alert alert-warning">
    <strong>‚ö†Ô∏è Attention :</strong> {{ stats.overdue_reviews }} review(s) sont en retard.
    Pensez √† relancer les reviewers concern√©s.
</div>
{% endif %}

{% if stats.pending_communications > 0 %}
<div class="alert alert-info">
    <strong>‚ÑπÔ∏è Info :</strong> {{ stats.pending_communications }} communication(s) n'ont pas encore 2 reviewers assign√©s.
    Utilisez l'affectation automatique si n√©cessaire.
</div>
{% endif %}

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ admin_url }}" class="btn">
        üìä Tableau de bord admin
    </a>
</div>

<p>Cordialement,<br>
<strong>Syst√®me de gestion du congr√®s SFT</strong></p>
{% endblock %}

<!-- templates/emails/welcome_reviewer.html - Email de bienvenue -->

{% extends 'emails/base_email.html' %}

{% block title %}Bienvenue comme reviewer{% endblock %}

{% block header_title %}Bienvenue !{% endblock %}
{% block header_subtitle %}Vous √™tes maintenant reviewer pour le congr√®s SFT{% endblock %}

{% block content %}
<p>Bonjour <strong>{{ reviewer.first_name or reviewer.email.split('@')[0] }}</strong>,</p>

<p>üéâ <strong>F√©licitations !</strong> Vous venez d'√™tre promu(e) reviewer pour le congr√®s SFT.</p>

{% if specialites %}
<p>Vos domaines d'expertise ont √©t√© configur√©s :</p>
<div class="thematiques" style="margin: 20px 0;">
    {% for specialite in specialites %}
    <span class="thematique-badge" style="background-color: {{ specialite.couleur }};">
        {{ specialite.code }} - {{ specialite.nom }}
    </span>
    {% endfor %}
</div>
{% endif %}

<div class="alert alert-info">
    <strong>En tant que reviewer, vous pourrez :</strong>
    <ul>
        <li>√âvaluer les communications dans vos domaines d'expertise</li>
        <li>Consulter votre tableau de bord personnalis√©</li>
        <li>G√©rer vos affectations et √©ch√©ances</li>
        <li>Contribuer √† la qualit√© scientifique du congr√®s</li>
    </ul>
</div>

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ dashboard_url }}" class="btn">
        üìä Mon tableau de bord reviewer
    </a>
    <a href="{{ help_url }}" class="btn btn-secondary">
        üìñ Guide du reviewer
    </a>
</div>

<p>Nous vous remercions chaleureusement pour votre engagement et votre expertise au service de la communaut√© scientifique.</p>

<p>Cordialement,<br>
<strong>L'√©quipe d'organisation du congr√®s SFT</strong></p>
{% endblock %}
