<!-- templates/emails/communication_authors.html -->
{% extends 'emails/base_email.html' %}

{% block title %}{{ email_subject }}{% endblock %}

{% block header_title %}Communication SFT 2026{% endblock %}
{% block header_subtitle %}{{ communication.title }}{% endblock %}

{% block content %}
<p>Bonjour <strong>{{ author.first_name or author.email.split('@')[0] }}</strong>,</p>

<p>{{ email_content|safe|replace('[PRENOM]', author.first_name or '')|replace('[NOM]', author.last_name or '')|replace('[TITRE_COMMUNICATION]', communication.title)|replace('[ID_COMMUNICATION]', communication.id|string) }}</p>

<div class="communication-box">
    <div class="communication-title">{{ communication.title }}</div>
    
    <p><strong>ID :</strong> {{ communication.id }}</p>
    <p><strong>Type :</strong> {{ communication.type.title() }}</p>
    <p><strong>Statut actuel :</strong> 
        <span class="thematique-badge" style="background-color: 
            {% if communication.status.value == 'accept√©' %}#28a745
            {% elif communication.status.value == 'rejet√©' %}#dc3545
            {% elif communication.status.value == 'en_review' %}#fd7e14
            {% else %}#6c757d{% endif %};">
            {{ communication.status.value.replace('_', ' ').title() }}
        </span>
    </p>
    
    {% if communication.authors %}
    <p><strong>Auteur(s) :</strong> 
        {% for co_author in communication.authors %}
            {{ co_author.first_name }} {{ co_author.last_name }}{% if not loop.last %}, {% endif %}
        {% endfor %}
    </p>
    {% endif %}
    
    {% if communication.thematiques %}
    <div class="thematiques">
        <strong>Th√©matiques :</strong><br>
        {% for thematique in communication.thematiques %}
        <span class="thematique-badge" style="background-color: {{ thematique.couleur }};">
            {{ thematique.code }} - {{ thematique.nom }}
        </span>
        {% endfor %}
    </div>
    {% endif %}
</div>

{% if communication.status.value == 'accept√©' %}
<div class="alert alert-success">
    <strong>üéâ F√©licitations !</strong> Votre communication a √©t√© accept√©e.<br>
    <small>Prochaine √©tape : Soumettre votre poster de pr√©sentation</small>
</div>
{% elif communication.status.value == 'rejet√©' %}
<div class="alert alert-danger">
    <strong>üìù D√©cision du comit√© scientifique</strong><br>
    <small>Nous vous encourageons √† soumettre √† nouveau lors de futures √©ditions</small>
</div>
{% elif communication.status.value == 'r√©vision_demand√©e' %}
<div class="alert alert-warning">
    <strong>üìù R√©visions demand√©es</strong><br>
    <small>Consultez les commentaires des reviewers dans votre espace personnel</small>
</div>
{% endif %}

<div style="text-align: center; margin: 30px 0;">
    <a href="{{ url_for('main.mes_communications', _external=True) }}" class="btn">
        üìã Mes communications
    </a>
    {% if communication.status.value in ['r√©sum√©_soumis', 'accept√©'] %}
    <a href="{{ url_for('main.update_submission', comm_id=communication.id, _external=True) }}" class="btn btn-secondary">
        üì§ Continuer la soumission
    </a>
    {% endif %}
</div>

<p>Pour toute question, n'h√©sitez pas √† nous contacter √† 
<a href="mailto:congres-sft2026@univ-lorraine.fr" style="color: #007bff;">congres-sft2026@univ-lorraine.fr</a></p>

<p>Cordialement,<br>
<strong>L'√©quipe d'organisation SFT 2026</strong></p>
{% endblock %}
